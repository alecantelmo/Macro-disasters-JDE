function derivs=f_d2(vars,params,index)
auxvar1p=vars(1);
logtilvp_tilvss=vars(2);
logtilup=vars(3);
logtilcp=vars(4);
nlp=vars(5);
logtillambdap=vars(6);
logtilwp=vars(7);
logucp=vars(8);
lognegtilulp=vars(9);
logmnomp=vars(10);
logmdenp=vars(11);
logtilrp=vars(12);
logtilqp=vars(13);
logtilxp=vars(14);
logtilkp=vars(15);
logtilyp=vars(16);
logtilqep=vars(17);
logqfp=vars(18);
tildivp=vars(19);
auxvar1=vars(20);
logtilv_tilvss=vars(21);
logtilu=vars(22);
logtilc=vars(23);
nl=vars(24);
logtillambda=vars(25);
logtilw=vars(26);
loguc=vars(27);
lognegtilul=vars(28);
logmnom=vars(29);
logmden=vars(30);
logtilr=vars(31);
logtilq=vars(32);
logtilx=vars(33);
logtilk=vars(34);
logtily=vars(35);
logtilqe=vars(36);
logqf=vars(37);
tildiv=vars(38);
logtilkstarbackp=vars(39);
dp=vars(40);
logthetap=vars(41);
zap=vars(42);
sigmap_perturbation=vars(43);
logtilkstarback=vars(44);
d=vars(45);
logtheta=vars(46);
za=vars(47);
sigma_perturbation=vars(48);
MUD=params(1);
RHOTHETA=params(2);
THETABAR=params(3);
SDV_THETA=params(4);
SDV_ZA=params(5);
ALPHA=params(6);
LAMBDA_A=params(7);
GAMMA=params(8);
NU=params(9);
PSI=params(10);
BETA=params(11);
DELTA=params(12);
PHI=params(13);
SCALEPARAM=params(14);
LOGTILUSS=params(15);
full_rows=zeros(136,1);
full_vals=zeros(136,1);
compressed_deriv=zeros(11,1);
compressed_deriv(1)=exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2;
compressed_deriv(2)=-exp(logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2;
compressed_deriv(3)=-dp*exp(logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2;
compressed_deriv(4)=-(exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2)/(ALPHA - 1);
compressed_deriv(5)=-exp(auxvar1);
compressed_deriv(6)=exp(2*logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2;
compressed_deriv(7)=exp(logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1) + dp*exp(2*logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2;
compressed_deriv(8)=(exp(logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2)/(ALPHA - 1);
compressed_deriv(9)=dp*exp(logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1) + dp^2*exp(2*logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2;
compressed_deriv(10)=(dp*exp(logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2)/(ALPHA - 1);
compressed_deriv(11)=(exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1)^2)/(ALPHA - 1)^2;
uncompressed_deriv=compressed_deriv(index.nnz{1,2});
full_vals(1:17)=uncompressed_deriv;
full_rows(1:17)=index.loc{1,2};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=(BETA*exp((auxvar1*(PSI - 1))/(GAMMA - 1))*(PSI - 1)^2)/(GAMMA - 1)^2;
compressed_deriv(2)=-exp(-logtilv_tilvss*(PSI - 1))*(PSI - 1)^2;
compressed_deriv(3)=SCALEPARAM*exp((LOGTILUSS - logtilu)*(PSI - 1))*(PSI - 1)^2;
uncompressed_deriv=compressed_deriv(index.nnz{2,2});
full_vals(18:20)=uncompressed_deriv;
full_rows(18:20)=index.loc{2,2};
compressed_deriv=zeros(1,1);
compressed_deriv(1)=(NU*exp(2*nl))/(exp(nl) + 1)^2 - (NU*exp(nl))/(exp(nl) + 1);
uncompressed_deriv=compressed_deriv(index.nnz{3,2});
full_vals(21:21)=uncompressed_deriv;
full_rows(21:21)=index.loc{3,2};
compressed_deriv=zeros(1,1);
compressed_deriv(1)=(NU*exp(2*nl))/(exp(nl) + 1)^2 - (NU*exp(nl))/(exp(nl) + 1);
uncompressed_deriv=compressed_deriv(index.nnz{4,2});
full_vals(22:22)=uncompressed_deriv;
full_rows(22:22)=index.loc{4,2};
compressed_deriv=zeros(1,1);
compressed_deriv(1)=((exp(nl) + 1)^NU*(exp(nl)/(exp(nl) + 1)^NU - (2*NU*exp(2*nl))/(exp(nl) + 1)^(NU + 1) - (NU*exp(nl)*(exp(nl) + 1))/(exp(nl) + 1)^(NU + 1) + (NU*exp(2*nl)*(exp(nl) + 1)*(NU + 1))/(exp(nl) + 1)^(NU + 2)))/(exp(nl) + 1) - (exp(nl)*(exp(nl)/(exp(nl) + 1)^NU - (NU*exp(nl)*(exp(nl) + 1))/(exp(nl) + 1)^(NU + 1))*(exp(nl) + 1)^NU)/(exp(nl) + 1)^2 + (NU*exp(nl)*(exp(nl)/(exp(nl) + 1)^NU - (NU*exp(nl)*(exp(nl) + 1))/(exp(nl) + 1)^(NU + 1))*(exp(nl) + 1)^(NU - 1))/(exp(nl) + 1);
uncompressed_deriv=compressed_deriv(index.nnz{5,2});
full_vals(23:23)=uncompressed_deriv;
full_rows(23:23)=index.loc{5,2};
compressed_deriv=zeros(2,1);
compressed_deriv(1)=PSI*exp(logtheta) + exp(logtheta)*(GAMMA - PSI);
compressed_deriv(2)=PSI*d*exp(logtheta) + d*exp(logtheta)*(GAMMA - PSI);
uncompressed_deriv=compressed_deriv(index.nnz{8,2});
full_vals(24:26)=uncompressed_deriv;
full_rows(24:26)=index.loc{8,2};
compressed_deriv=zeros(21,1);
compressed_deriv(1)=exp(logmnomp - logmden - dp*exp(logthetap))*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(2)=exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilrp);
compressed_deriv(3)=-exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilqp)*(DELTA - 1);
compressed_deriv(4)=-exp(logmnomp - logmden - dp*exp(logthetap))*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(5)=-exp(logmnomp - logmden - dp*exp(logthetap))*exp(logthetap)*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(6)=-dp*exp(logmnomp - logmden - dp*exp(logthetap))*exp(logthetap)*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(7)=exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilrp);
compressed_deriv(8)=-exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilrp);
compressed_deriv(9)=-exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilrp)*exp(logthetap);
compressed_deriv(10)=-dp*exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilrp)*exp(logthetap);
compressed_deriv(11)=-exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilqp)*(DELTA - 1);
compressed_deriv(12)=exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilqp)*(DELTA - 1);
compressed_deriv(13)=exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilqp)*exp(logthetap)*(DELTA - 1);
compressed_deriv(14)=dp*exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilqp)*exp(logthetap)*(DELTA - 1);
compressed_deriv(15)=exp(logmnomp - logmden - dp*exp(logthetap))*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(16)=exp(logmnomp - logmden - dp*exp(logthetap))*exp(logthetap)*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(17)=dp*exp(logmnomp - logmden - dp*exp(logthetap))*exp(logthetap)*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(18)=-exp(logtilq);
compressed_deriv(19)=exp(2*logthetap)*exp(logmnomp - logmden - dp*exp(logthetap))*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(20)=dp*exp(2*logthetap)*exp(logmnomp - logmden - dp*exp(logthetap))*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1)) - exp(logmnomp - logmden - dp*exp(logthetap))*exp(logthetap)*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(21)=dp^2*exp(2*logthetap)*exp(logmnomp - logmden - dp*exp(logthetap))*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1)) - dp*exp(logmnomp - logmden - dp*exp(logthetap))*exp(logthetap)*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
uncompressed_deriv=compressed_deriv(index.nnz{10,2});
full_vals(27:61)=uncompressed_deriv;
full_rows(27:61)=index.loc{10,2};
compressed_deriv=zeros(1,1);
compressed_deriv(1)=exp(logtilq);
uncompressed_deriv=compressed_deriv(index.nnz{11,2});
full_vals(62:62)=uncompressed_deriv;
full_rows(62:62)=index.loc{11,2};
compressed_deriv=zeros(1,1);
compressed_deriv(1)=exp(2*nl)/(exp(nl) + 1)^2 - exp(nl)/(exp(nl) + 1) + (ALPHA*exp(nl))/(exp(nl) + 1) - (ALPHA*exp(2*nl))/(exp(nl) + 1)^2;
uncompressed_deriv=compressed_deriv(index.nnz{12,2});
full_vals(63:63)=uncompressed_deriv;
full_rows(63:63)=index.loc{12,2};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=-ALPHA*(exp(2*nl)/(exp(nl) + 1)^2 - exp(nl)/(exp(nl) + 1));
compressed_deriv(2)=exp(logtheta) - ALPHA*exp(logtheta) + exp(logtheta)*(ALPHA - 1);
compressed_deriv(3)=d*exp(logtheta) + d*exp(logtheta)*(ALPHA - 1) - ALPHA*d*exp(logtheta);
uncompressed_deriv=compressed_deriv(index.nnz{13,2});
full_vals(64:67)=uncompressed_deriv;
full_rows(64:67)=index.loc{13,2};
compressed_deriv=zeros(4,1);
compressed_deriv(1)=-(exp(2*nl)/(exp(nl) + 1)^2 - exp(nl)/(exp(nl) + 1))*(ALPHA - 1);
compressed_deriv(2)=exp(2*logtily)/(PHI + exp(logtily))^2 - exp(logtily)/(PHI + exp(logtily));
compressed_deriv(3)=exp(logtheta) - ALPHA*exp(logtheta) + exp(logtheta)*(ALPHA - 1);
compressed_deriv(4)=d*exp(logtheta) + d*exp(logtheta)*(ALPHA - 1) - ALPHA*d*exp(logtheta);
uncompressed_deriv=compressed_deriv(index.nnz{14,2});
full_vals(68:72)=uncompressed_deriv;
full_rows(68:72)=index.loc{14,2};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=exp(logtilc);
compressed_deriv(2)=exp(logtilx);
compressed_deriv(3)=-exp(logtily);
uncompressed_deriv=compressed_deriv(index.nnz{15,2});
full_vals(73:75)=uncompressed_deriv;
full_rows(73:75)=index.loc{15,2};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=-exp(logtilx);
compressed_deriv(2)=exp(logtilk)*(DELTA - 1);
compressed_deriv(3)=exp(logtilkstarbackp);
uncompressed_deriv=compressed_deriv(index.nnz{16,2});
full_vals(76:78)=uncompressed_deriv;
full_rows(76:78)=index.loc{16,2};
compressed_deriv=zeros(27,1);
compressed_deriv(1)=exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep));
compressed_deriv(2)=exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logtilqep);
compressed_deriv(3)=exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1));
compressed_deriv(4)=-exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep));
compressed_deriv(5)=-exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep));
compressed_deriv(6)=-dp*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep));
compressed_deriv(7)=-(exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep)))/(ALPHA - 1);
compressed_deriv(8)=exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logtilqep);
compressed_deriv(9)=-exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logtilqep);
compressed_deriv(10)=-exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*exp(logtilqep);
compressed_deriv(11)=-dp*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*exp(logtilqep);
compressed_deriv(12)=-(exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logtilqep))/(ALPHA - 1);
compressed_deriv(13)=-exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1));
compressed_deriv(14)=-exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap);
compressed_deriv(15)=-dp*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap);
compressed_deriv(16)=-exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))/(ALPHA - 1);
compressed_deriv(17)=exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep));
compressed_deriv(18)=exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep));
compressed_deriv(19)=dp*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep));
compressed_deriv(20)=(exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep)))/(ALPHA - 1);
compressed_deriv(21)=-exp(logtilqe);
compressed_deriv(22)=exp(2*logthetap)*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep));
compressed_deriv(23)=dp*exp(2*logthetap)*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep)) - exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep));
compressed_deriv(24)=(exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep)))/(ALPHA - 1);
compressed_deriv(25)=dp^2*exp(2*logthetap)*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep)) - dp*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep));
compressed_deriv(26)=(dp*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep)))/(ALPHA - 1);
compressed_deriv(27)=(exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep)))/(ALPHA - 1)^2;
uncompressed_deriv=compressed_deriv(index.nnz{18,2});
full_vals(79:125)=uncompressed_deriv;
full_rows(79:125)=index.loc{18,2};
compressed_deriv=zeros(5,1);
compressed_deriv(1)=(3*exp(logtilw + nl)*exp(nl))/(exp(nl) + 1)^2 - exp(logtilw + nl)/(exp(nl) + 1) - (2*exp(2*nl)*exp(logtilw + nl))/(exp(nl) + 1)^3;
compressed_deriv(2)=(exp(logtilw + nl)*exp(nl))/(exp(nl) + 1)^2 - exp(logtilw + nl)/(exp(nl) + 1);
compressed_deriv(3)=-exp(logtilw + nl)/(exp(nl) + 1);
compressed_deriv(4)=-exp(logtilx);
compressed_deriv(5)=exp(logtily);
uncompressed_deriv=compressed_deriv(index.nnz{19,2});
full_vals(126:131)=uncompressed_deriv;
full_rows(126:131)=index.loc{19,2};
compressed_deriv=zeros(4,1);
compressed_deriv(1)=exp(logmnomp - logmden);
compressed_deriv(2)=-exp(logmnomp - logmden);
compressed_deriv(3)=exp(logmnomp - logmden);
compressed_deriv(4)=-exp(logqf);
uncompressed_deriv=compressed_deriv(index.nnz{20,2});
full_vals(132:136)=uncompressed_deriv;
full_rows(132:136)=index.loc{20,2};
derivs=sparse(full_rows,ones(length(full_vals),1),full_vals,46080,1);
