function derivs=f_d1(vars,params,index)
auxvar1p=vars(1);
logtilvp_tilvss=vars(2);
logtilup=vars(3);
logtilcp=vars(4);
nlp=vars(5);
logtillambdap=vars(6);
logtilwp=vars(7);
logucp=vars(8);
lognegtilulp=vars(9);
logmnomp=vars(10);
logmdenp=vars(11);
logtilrp=vars(12);
logtilqp=vars(13);
logtilxp=vars(14);
logtilkp=vars(15);
logtilyp=vars(16);
logtilqep=vars(17);
logqfp=vars(18);
tildivp=vars(19);
auxvar1=vars(20);
logtilv_tilvss=vars(21);
logtilu=vars(22);
logtilc=vars(23);
nl=vars(24);
logtillambda=vars(25);
logtilw=vars(26);
loguc=vars(27);
lognegtilul=vars(28);
logmnom=vars(29);
logmden=vars(30);
logtilr=vars(31);
logtilq=vars(32);
logtilx=vars(33);
logtilk=vars(34);
logtily=vars(35);
logtilqe=vars(36);
logqf=vars(37);
tildiv=vars(38);
logtilkstarbackp=vars(39);
dp=vars(40);
logthetap=vars(41);
zap=vars(42);
sigmap_perturbation=vars(43);
logtilkstarback=vars(44);
d=vars(45);
logtheta=vars(46);
za=vars(47);
sigma_perturbation=vars(48);
MUD=params(1);
RHOTHETA=params(2);
THETABAR=params(3);
SDV_THETA=params(4);
SDV_ZA=params(5);
ALPHA=params(6);
LAMBDA_A=params(7);
GAMMA=params(8);
NU=params(9);
PSI=params(10);
BETA=params(11);
DELTA=params(12);
PHI=params(13);
SCALEPARAM=params(14);
LOGTILUSS=params(15);
full_rows=zeros(81,1);
full_vals=zeros(81,1);
compressed_deriv=zeros(5,1);
compressed_deriv(1)=-exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1);
compressed_deriv(2)=-exp(auxvar1);
compressed_deriv(3)=exp(logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1);
compressed_deriv(4)=dp*exp(logthetap)*exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1);
compressed_deriv(5)=(exp(-(logtilvp_tilvss - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(GAMMA - 1))*(GAMMA - 1))/(ALPHA - 1);
uncompressed_deriv=compressed_deriv(index.nnz{1,1});
full_vals(1:5)=uncompressed_deriv;
full_rows(1:5)=index.loc{1,1};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=(BETA*exp((auxvar1*(PSI - 1))/(GAMMA - 1))*(PSI - 1))/(GAMMA - 1);
compressed_deriv(2)=exp(-logtilv_tilvss*(PSI - 1))*(PSI - 1);
compressed_deriv(3)=-SCALEPARAM*exp((LOGTILUSS - logtilu)*(PSI - 1))*(PSI - 1);
uncompressed_deriv=compressed_deriv(index.nnz{2,1});
full_vals(6:8)=uncompressed_deriv;
full_rows(6:8)=index.loc{2,1};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=-1;
compressed_deriv(2)=1;
compressed_deriv(3)=-(NU*exp(nl))/(exp(nl) + 1);
uncompressed_deriv=compressed_deriv(index.nnz{3,1});
full_vals(9:11)=uncompressed_deriv;
full_rows(9:11)=index.loc{3,1};
compressed_deriv=zeros(2,1);
compressed_deriv(1)=-(NU*exp(nl))/(exp(nl) + 1);
compressed_deriv(2)=-1;
uncompressed_deriv=compressed_deriv(index.nnz{4,1});
full_vals(12:13)=uncompressed_deriv;
full_rows(12:13)=index.loc{4,1};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=1;
compressed_deriv(2)=((exp(nl)/(exp(nl) + 1)^NU - (NU*exp(nl)*(exp(nl) + 1))/(exp(nl) + 1)^(NU + 1))*(exp(nl) + 1)^NU)/(exp(nl) + 1);
compressed_deriv(3)=-1;
uncompressed_deriv=compressed_deriv(index.nnz{5,1});
full_vals(14:16)=uncompressed_deriv;
full_rows(14:16)=index.loc{5,1};
compressed_deriv=zeros(4,1);
compressed_deriv(1)=-PSI;
compressed_deriv(2)=-1;
compressed_deriv(3)=-1;
compressed_deriv(4)=1;
uncompressed_deriv=compressed_deriv(index.nnz{6,1});
full_vals(17:20)=uncompressed_deriv;
full_rows(17:20)=index.loc{6,1};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=-PSI;
compressed_deriv(2)=-1;
compressed_deriv(3)=1;
uncompressed_deriv=compressed_deriv(index.nnz{7,1});
full_vals(21:23)=uncompressed_deriv;
full_rows(21:23)=index.loc{7,1};
compressed_deriv=zeros(6,1);
compressed_deriv(1)=PSI - GAMMA;
compressed_deriv(2)=1;
compressed_deriv(3)=-1;
compressed_deriv(4)=PSI*exp(logtheta) + exp(logtheta)*(GAMMA - PSI);
compressed_deriv(5)=PSI*d*exp(logtheta) + d*exp(logtheta)*(GAMMA - PSI);
compressed_deriv(6)=PSI/(ALPHA - 1) + (GAMMA - PSI)/(ALPHA - 1);
uncompressed_deriv=compressed_deriv(index.nnz{8,1});
full_vals(24:29)=uncompressed_deriv;
full_rows(24:29)=index.loc{8,1};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=(GAMMA - PSI)/(GAMMA - 1);
compressed_deriv(2)=1;
compressed_deriv(3)=-1;
uncompressed_deriv=compressed_deriv(index.nnz{9,1});
full_vals(30:32)=uncompressed_deriv;
full_rows(30:32)=index.loc{9,1};
compressed_deriv=zeros(7,1);
compressed_deriv(1)=exp(logmnomp - logmden - dp*exp(logthetap))*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(2)=exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilrp);
compressed_deriv(3)=-exp(logmnomp - logmden - dp*exp(logthetap))*exp(logtilqp)*(DELTA - 1);
compressed_deriv(4)=-exp(logmnomp - logmden - dp*exp(logthetap))*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(5)=-exp(logtilq);
compressed_deriv(6)=-exp(logmnomp - logmden - dp*exp(logthetap))*exp(logthetap)*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
compressed_deriv(7)=-dp*exp(logmnomp - logmden - dp*exp(logthetap))*exp(logthetap)*(exp(logtilrp) - exp(logtilqp)*(DELTA - 1));
uncompressed_deriv=compressed_deriv(index.nnz{10,1});
full_vals(33:39)=uncompressed_deriv;
full_rows(33:39)=index.loc{10,1};
compressed_deriv=zeros(1,1);
compressed_deriv(1)=exp(logtilq);
uncompressed_deriv=compressed_deriv(index.nnz{11,1});
full_vals(40:40)=uncompressed_deriv;
full_rows(40:40)=index.loc{11,1};
compressed_deriv=zeros(4,1);
compressed_deriv(1)=(ALPHA*exp(nl))/(exp(nl) + 1) - exp(nl)/(exp(nl) + 1) - ALPHA + 1;
compressed_deriv(2)=-1;
compressed_deriv(3)=ALPHA - 1;
compressed_deriv(4)=1;
uncompressed_deriv=compressed_deriv(index.nnz{12,1});
full_vals(41:44)=uncompressed_deriv;
full_rows(41:44)=index.loc{12,1};
compressed_deriv=zeros(6,1);
compressed_deriv(1)=ALPHA*(exp(nl)/(exp(nl) + 1) - 1);
compressed_deriv(2)=-1;
compressed_deriv(3)=ALPHA;
compressed_deriv(4)=exp(logtheta) - ALPHA*exp(logtheta) + exp(logtheta)*(ALPHA - 1);
compressed_deriv(5)=d*exp(logtheta) + d*exp(logtheta)*(ALPHA - 1) - ALPHA*d*exp(logtheta);
compressed_deriv(6)=1/(ALPHA - 1) + 1;
uncompressed_deriv=compressed_deriv(index.nnz{13,1});
full_vals(45:50)=uncompressed_deriv;
full_rows(45:50)=index.loc{13,1};
compressed_deriv=zeros(6,1);
compressed_deriv(1)=(exp(nl)/(exp(nl) + 1) - 1)*(ALPHA - 1);
compressed_deriv(2)=-exp(logtily)/(PHI + exp(logtily));
compressed_deriv(3)=ALPHA;
compressed_deriv(4)=exp(logtheta) - ALPHA*exp(logtheta) + exp(logtheta)*(ALPHA - 1);
compressed_deriv(5)=d*exp(logtheta) + d*exp(logtheta)*(ALPHA - 1) - ALPHA*d*exp(logtheta);
compressed_deriv(6)=1/(ALPHA - 1) + 1;
uncompressed_deriv=compressed_deriv(index.nnz{14,1});
full_vals(51:56)=uncompressed_deriv;
full_rows(51:56)=index.loc{14,1};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=exp(logtilc);
compressed_deriv(2)=exp(logtilx);
compressed_deriv(3)=-exp(logtily);
uncompressed_deriv=compressed_deriv(index.nnz{15,1});
full_vals(57:59)=uncompressed_deriv;
full_rows(57:59)=index.loc{15,1};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=-exp(logtilx);
compressed_deriv(2)=exp(logtilk)*(DELTA - 1);
compressed_deriv(3)=exp(logtilkstarbackp);
uncompressed_deriv=compressed_deriv(index.nnz{16,1});
full_vals(60:62)=uncompressed_deriv;
full_rows(60:62)=index.loc{16,1};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=-1;
compressed_deriv(2)=1;
compressed_deriv(3)=1/(ALPHA - 1);
uncompressed_deriv=compressed_deriv(index.nnz{17,1});
full_vals(63:65)=uncompressed_deriv;
full_rows(63:65)=index.loc{17,1};
compressed_deriv=zeros(8,1);
compressed_deriv(1)=exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep));
compressed_deriv(2)=exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logtilqep);
compressed_deriv(3)=exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1));
compressed_deriv(4)=-exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep));
compressed_deriv(5)=-exp(logtilqe);
compressed_deriv(6)=-exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep));
compressed_deriv(7)=-dp*exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*exp(logthetap)*(tildivp + exp(logtilqep));
compressed_deriv(8)=-(exp(logmnomp - logmden - (LAMBDA_A + zap + dp*exp(logthetap)*(ALPHA - 1))/(ALPHA - 1))*(tildivp + exp(logtilqep)))/(ALPHA - 1);
uncompressed_deriv=compressed_deriv(index.nnz{18,1});
full_vals(66:73)=uncompressed_deriv;
full_rows(66:73)=index.loc{18,1};
compressed_deriv=zeros(5,1);
compressed_deriv(1)=(exp(logtilw + nl)*exp(nl))/(exp(nl) + 1)^2 - exp(logtilw + nl)/(exp(nl) + 1);
compressed_deriv(2)=-exp(logtilw + nl)/(exp(nl) + 1);
compressed_deriv(3)=-exp(logtilx);
compressed_deriv(4)=exp(logtily);
compressed_deriv(5)=-1;
uncompressed_deriv=compressed_deriv(index.nnz{19,1});
full_vals(74:78)=uncompressed_deriv;
full_rows(74:78)=index.loc{19,1};
compressed_deriv=zeros(3,1);
compressed_deriv(1)=exp(logmnomp - logmden);
compressed_deriv(2)=-exp(logmnomp - logmden);
compressed_deriv(3)=-exp(logqf);
uncompressed_deriv=compressed_deriv(index.nnz{20,1});
full_vals(79:81)=uncompressed_deriv;
full_rows(79:81)=index.loc{20,1};
derivs=sparse(full_rows,ones(length(full_vals),1),full_vals,960,1);
